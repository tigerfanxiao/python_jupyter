# Windows Terminal
## Switch Tab
`ctrl + tab`

# Markdown in VS code
* `ctrl + shift + v` open an preview window 
* `ctrl + k v` open an side by side preview window

# Ubuntu
## Clear Screen
```shell
clear
```
`ctrl + L`
## update
```shell
sudo apt update
sudo apt upgrade -y
```
If you cannot run upgrade, it is because auto upgrade is running in the background. You could test with `sudo apt update` to see the quantity of upgradeable package is decreasing.

## check ps
```shell
ps aux | grep -i apt
```
### kill ps
```shell
sudo kill <process_id>
```

## lsb_release
```shell
sudo apt install lsb-core
lsb_release -a
```
## Save command output to variable
```shell
my_var = 'pwd'
// or 
my_var = $(pwd)
// print variable
echo $my_var
```

## Create soft link
create soft link at /usr/bin/bar to /opt/foo
```shell 
ln -s /opt/foo /usr/bin/bar
```
## Config ssh
```shell
// check if ssh public key already exists
ls -l ~/.ssh/id_*.pub

// generate ssh key
ssh-keygen -t rsa -b 4096 -C "your_email@domain.com"
```
edit ssh config
[refer](https://www.digitalocean.com/community/questions/error-permission-denied-publickey-when-i-try-to-ssh)
```shell
sudo nano /etc/ssh/sshd_config
// PermitRootLogin prohibit-password to 
PermitRootLogin yes 

// PasswordAuthentication no to 
PasswordAuthentication yes
```
then, restart ssh service:
```shell
// if you cannot restart ssh service
sudo ssh-keygen -A

// restart ssh service
sudo service ssh 
// or
/etc/init.d/ssh restart
// or
sudo systemctl restart ssh

// add private key to ssh-agent
ssh-add ~/.ssh/xiao_github
```
test ssh
```shell
ssh -T git@github.com
Hi tigerfanxiao! You've successfully authenticated, but GitHub does not provide shell access.
```
# git
```shell
git clone url
git config --global user.name "Xiao fan"
git config --global user.email tigerfanxiao@gmail.com 
git add .
git commit -m 'first init'
git push origin master
```
### git pull origin / git pull origin/master

* `git pull origin master` will pull changes from the origin remote, master branch and merge them to the local checked-out branch. 
* `git pull origin/master` will pull changes from the locally stored branch origin/master and merge that to the local checked-out branch





# Python

## Pandas

```python
import pandas as pd
```

### Create Data Frame

```python
# define the data as a list
data = [
    ("Dexter","Johnsons","dog","shiba inu","red sesame",1.5,35,"m",False,"both",True),
    ("Alfred","Johnsons","cat","mix","tuxedo",4,12,"m",True,"indoor",True),
    ("Petra","Smith","cat","ragdoll","calico",6,None,"f",False,"both",True),
    ("Ava","Smith","dog","mix","blk/wht",12,32,"f",True,"both",False),
    ("Schroder","Brown","cat","mix","orange",13,15,"m",False,"indoor",True),
    ("Blackbeard","Brown","bird","parrot","multi",5,3,"f",False,"indoor",),
]

# define the labels
labels = ["name","owner","type","breed","color","age","weight","gender","health issues","indoor/outboor","vaccinated"]

# create dataframe
vet_records = pd.DataFrame.from_records(data, columns=labels)

```

### view dataframe

```python
# show data
vet_records.head() # show first 5 records
vet_records.tail() # show last 5 records
vet_records # show first 5 records

# show data type of each column
vet_records.dtypes

# show statistic information on the columns that operation can be performed on 
vet_records.describe()
vet_records.describe(include='all')

```

### Edit Data

```python
# change the value of one cell
vet_records.at[0,'weight'] = 30.8

# add one new column
vet_records.assign(new_col_name(vet_records['age']/vet_records['weight']))
```

### Slicing and Filtering

```python
# show one column
vet_records.type # type column
vet_records['type'] # type column

# groupby is used for whole dataframe
vet_records.groupby('type')
# for one column use value count
vet_records.type.value_counts()

# filter with all column
vet_records[vet_records.type == 'dog']
# filter with one columns
vet_records.type[vet_records.type=='dog']

```

### loc & iloc

- `loc` allows you to use column names to slice data
- `iloc` requires the use of index numbers. Example: `.iloc[row, column]`. Remember: python indexes starting at 0.

```python
# show the first 3 rows, column name and column owner
vet_records.loc[0:3, ['name', 'owner']]

# show the first column
vet_records.iloc[:, 0]

# get 3rd and 4th row , with field color and age
vet_records.iloc[[2,3], [4,5]]

# in
vet_records[vet_records.name.isin(['Dexter', 'Blackbeard'])]
# not 
vet_records[~vet_records.name.isin(['Dexter', 'Blackbeard'])]

```

### mask

```python
# filter the table with mask
mask = vet_records.gender=="m"
vet_records[mask]

```

### None and NaN

`.isna` will create a boolean dataframe True where the value is NaN or None. It is advisable to deal with NaN and None values before doing ny calculations. A NaN and None cell are ignored during calculations.

```python
# show a table and see which value is na
vet_records.isna()

# fill all the na cell with 0
vet_records.fillna(0)

# fillna with dictionay
values = {'age': 12, 'vaccinated': False}
vet_records.fillna(value=values) # return a new dataframe instance

```



## Matplotlib

install matplotlib

```shell
conda install matplotlib
```



```python
import matplotlib.pyplot as plt
import numpy as np
%matplotlib inline

# set x to be 0 to 4pi in .1 increment
x = np.arange(0, 4*np.pi, 0.1)

y = np.sin(x)
z = np.sin(x)

# plot them
plt.plot(x, y, x, z)
plt.show()
```

```javascript
var s = "JavaScript syntax highlighting";
alert(s);
```
```python
s = "Python syntax highlighting"
print s
```



# Jupyter

package is needed to later turn our notebooks to PDF
```shell
sudo apt install -y texlive-xetex
```
Download anaconda
```shell
cd /tmp
curl -O https://repo.anaconda.com/archive/Anaconda3-2019.03-Linux-x86_64.sh
```
check md5
```shell
sha256sum Anaconda3-2019.03-Linux-x86_64.sh
```
> 45c851b7497cc14d5ca060064394569f724b67d9b5f98a926ed49b834a6bb73a Anaconda3-2019.03-Linux-x86_64.sh

install anaconda
```shell
bash Anaconda3-2019.03-Linux-x86_64.sh
```
During install, you could choose auto config env path.
This will update you `~/.bashrc` file so that you can use conda on the command.

We need to restart the shell to include the changes made:
```shell
source ~/.bashrc
```
You will see a `(base)` prepended to your command line. That indicates that the base conda virtual environment has been activated. This will happen everytime we start the terminal. We don't want that behavior; to turn it off:
```shell
conda config --set auto_activate_base false
```
Now let's update the conda base code:
```shell
conda update -n base -c defaults conda
```
## Create virtual env
```shell
// create env
conda create -n python_data_course python=3
// list all available env
conda env list

// activate env
conda activate envname
// deactivate current
conda deactive 
```
### Install jupyter
```shell
conda install jupyter psutil
conda install matplotlib
conda install pandas numpy
```
### start and stop jupyter server
```shell
jupyter --version
jupyter notebook list
// stop jupyter notebook by the port
jupyter notebook stop 8086
```
### run jupyter on remove server
run this python script
```python
import os
import psutil
from subprocess import Popen
from time import sleep

no_token = True

while no_token:
    # kill any jupyter notebook processes
    for proc in psutil.process_iter():
        if proc.name() == 'jupyter-noteboo':
            proc.kill()

    # delete old nohup.out if exists
    if os.path.exists("nohup.out"):
        os.remove("nohup.out")

    # start jupyter notebook server on port 8086
    Popen(
        ['nohup', 'jupyter', 'notebook', '--no-browser', '--port=8086'],
        stdout=open('nohup.out', 'w'),
        preexec_fn=os.setpgrp)

    # wait for above process to finish
    sleep(3)

    # write jupyter server token to screen
    token_file = open("nohup.out")

    for line in token_file:
        if line.find("token=") > 0:
            print(line[line.find("token=")+6: ])
            no_token = False
            break

    token_file.close()

```
## Open Jupyter notebook on remote sever
In a local terminal window, enter the following:
```shell
ssh -N -L localhost:8087:localhost:8086 cloud_user@<the public IP address of the Playground server>
```
`-N` indicates there will be no remote commands. `-L` maps the local port to the remote port.

We've selected port 8086, but the actual port number is not important as long as we know what it is and it does not conflict with other running services.

It will ask for a password. This is the password we use to log in to the Playground remote server.

Leave this terminal open. It will appear nothing has happened, but it must remain open while we use the Jupyter Notebook server in this session.

In a browser, enter the following address:

http://localhost:8087

This will open a Jupyter Notebook site that asks for the token copied from the remote server

After you input the token, you need to the jupyter server

# PosgreSQL

## install

